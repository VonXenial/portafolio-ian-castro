---
interface Props {
  name: string;
  title: string;
  subtitle: string;
}

const { name, title, subtitle } = Astro.props;
---

<section class="min-h-screen flex flex-col justify-center px-6 md:px-12 lg:px-24 relative overflow-hidden bg-burgundy-dark">
  <!-- Background gradient overlay -->
  <div class="absolute inset-0 bg-gradient-to-br from-black/60 via-transparent to-burgundy/30"></div>
  
  <!-- Asymmetric layout container -->
  <div class="max-w-7xl mx-auto w-full relative z-10">
    <!-- Small label -->
    <p class="text-cream/50 text-sm md:text-base font-sans uppercase tracking-[0.3em] mb-6 md:mb-10 hero-label">
      Portafolio 2025
    </p>
    
    <!-- Main name - massive typography -->
    <h1 class="text-display font-sans font-black text-cream mb-6 md:mb-10 hero-title leading-none">
      {name.split('').map((char, i) => (
        <span class="char inline-block" style={`--char-index: ${i}`}>{char === ' ' ? '\u00A0' : char}</span>
      ))}
    </h1>
    
    <!-- Title with offset -->
    <div class="md:ml-12 lg:ml-24">
      <h2 class="text-title font-sans font-bold hero-subtitle">
        <span class="bg-crimson-dark text-cream px-4 py-2 inline-block">{title}</span>
      </h2>
    </div>
    
    <!-- Subtitle with more offset -->
    <div class="md:ml-6 lg:ml-16 mt-8 md:mt-12">
      <p class="text-body-lg font-serif text-cream/70 max-w-2xl leading-relaxed hero-description">
        {subtitle}
      </p>
    </div>

    <!-- Scroll indicator -->
    <div class="absolute bottom-8 md:bottom-12 left-1/2 -translate-x-1/2 flex flex-col items-center gap-3 scroll-indicator">
      <span class="text-cream/40 text-xs font-sans uppercase tracking-widest">Scroll</span>
      <div class="w-px h-12 md:h-20 bg-gradient-to-b from-cream/40 to-transparent"></div>
    </div>
  </div>
  
  <!-- Decorative elements -->
  <div class="absolute top-1/4 right-0 w-64 h-64 bg-crimson/10 blur-3xl rounded-full"></div>
  <div class="absolute bottom-1/4 left-0 w-48 h-48 bg-burgundy/20 blur-2xl rounded-full"></div>
</section>

<script>
  import gsap from 'gsap';
  import { ScrollTrigger } from 'gsap/ScrollTrigger';

  gsap.registerPlugin(ScrollTrigger);

  document.addEventListener('DOMContentLoaded', () => {
    const chars = document.querySelectorAll('.hero-title .char');
    const label = document.querySelector('.hero-label');
    const subtitle = document.querySelector('.hero-subtitle');
    const description = document.querySelector('.hero-description');
    const scrollIndicator = document.querySelector('.scroll-indicator');

    // Timeline for hero animations
    const tl = gsap.timeline({ defaults: { ease: 'power3.out' } });

    // Animate label
    tl.fromTo(label, 
      { opacity: 0, y: 20 },
      { opacity: 1, y: 0, duration: 0.8 }
    );

    // Animate each character with stagger
    tl.fromTo(chars, 
      { opacity: 0, y: 80, rotateX: -90 },
      { 
        opacity: 1, 
        y: 0, 
        rotateX: 0,
        duration: 0.8,
        stagger: 0.04,
        ease: 'back.out(1.7)'
      },
      '-=0.4'
    );

    // Animate subtitle
    tl.fromTo(subtitle,
      { opacity: 0, x: -40 },
      { opacity: 1, x: 0, duration: 0.8 },
      '-=0.4'
    );

    // Animate description
    tl.fromTo(description,
      { opacity: 0, y: 30 },
      { opacity: 1, y: 0, duration: 0.8 },
      '-=0.5'
    );

    // Animate scroll indicator
    tl.fromTo(scrollIndicator,
      { opacity: 0 },
      { opacity: 1, duration: 1.2 },
      '-=0.3'
    );

    // Parallax effect on scroll for the title
    gsap.to('.hero-title', {
      yPercent: -20,
      ease: 'none',
      scrollTrigger: {
        trigger: '.hero-title',
        start: 'top center',
        end: 'bottom top',
        scrub: 1
      }
    });

    // Fade out scroll indicator
    gsap.to(scrollIndicator, {
      opacity: 0,
      scrollTrigger: {
        trigger: scrollIndicator,
        start: 'top 80%',
        end: 'top 50%',
        scrub: true
      }
    });
  });
</script>

<style>
  .char {
    transform-origin: bottom center;
  }
</style>
